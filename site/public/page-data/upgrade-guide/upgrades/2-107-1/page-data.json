{"componentChunkName":"component---src-templates-step-template-js","path":"/upgrade-guide/upgrades/2-107-1/","result":{"data":{"asciidoc":{"html":"<div class=\"sect3\">\n<h4 id=\"_whitelist_for_remoting_and_xstream_jep_200\">Whitelist for Remoting and XStream (JEP-200)</h4>\n<div class=\"paragraph\">\n<p><a href=\"/blog/2018/03/15/jep-200-lts/\">Announcement from Mar 15</a>,\n<a href=\"https://issues.jenkins.io/browse/JENKINS-47736\">JENKINS-47736</a>,\n<a href=\"https://github.com/jenkinsci/jep/blob/master/jep/200/README.adoc\">JEP-200 proposal and design</a></p>\n</div>\n<div class=\"paragraph\">\n<p>To prevent further security issues related to unsafe deserialization of Java objects, we switched to a whitelist for Remoting (the communication library mostly used between agents and master) and XStream (the XML serialization library).\nThis change means that only classes considered to be safe to (de)serialize will now be (de)serialized.</p>\n</div>\n<div class=\"paragraph\">\n<p>See <a href=\"/blog/2018/03/15/jep-200-lts/#for-jenkins-administrators\">the announcement blog post</a> for update guidelines.\nMany plugins require updates to be compatible with this new restriction (<a href=\"https://wiki.jenkins.io/display/JENKINS/Plugins+affected+by+fix+for+JEP-200\">list</a>),\nplease read the guide carefully.</p>\n</div>\n</div>\n<div class=\"sect3\">\n<h4 id=\"_xml_files_are_now_stored_as_xml_1_1\">XML files are now stored as XML 1.1</h4>\n<div class=\"paragraph\">\n<p><a href=\"https://issues.jenkins.io/browse/JENKINS-48463\">JENKINS-48463</a>,\n<a href=\"https://issues.jenkins.io/browse/JENKINS-50126\">JENKINS-50126</a></p>\n</div>\n<div class=\"paragraph\">\n<p>Jenkins now creates XML 1.1 files to be more accepting of unusual contents.\nThe XML processing instruction in those XML files will now indicate the version 1.1 instead of 1.0 as before:</p>\n</div>\n<div class=\"literalblock\">\n<div class=\"content\">\n<pre>&lt;?xml version=\"1.1\" encoding=\"UTF-8\" ?&gt;</pre>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>This change may result in Jenkins refusing to load or parse malformed files differently from previous releases:\nFor example, we have received a report (JENKINS-50126) that it now refuses to load XML files from disk that do not start with an XML processing instruction, but instead with a line break (empty line).</p>\n</div>\n<div class=\"paragraph\">\n<p>Previous versions of Jenkins cannot read XML 1.1 files, so downgrading Jenkins to an earlier release will result in errors.\nIn many cases, it <em>should</em> be sufficient to just replace <code>1.1</code> with <code>1.0</code> to make them readable again, but note that downgrades of Jenkins are generally unsupported.</p>\n</div>\n</div>\n<div class=\"sect3\">\n<h4 id=\"_updating_jenkins_jobs_and_views_by_xml_now_resets_unspecified_fields\">Updating Jenkins jobs and views by XML now resets unspecified fields</h4>\n<div class=\"paragraph\">\n<p><a href=\"https://issues.jenkins.io/browse/JENKINS-21017\">JENKINS-21017</a></p>\n</div>\n<div class=\"paragraph\">\n<p>In previous releases, updating jobs and views by XML left fields at their old value if not defined in the new XML file that the job or view is being updated with.\nThis long-standing bug has now been fixed, and Jenkins will reset unspecified fields to their default value, instead of retaining the previously defined value.\nThis impacts the Remote API (<code>POST config.xml</code>), the CLI (<code>update-job</code> and similar commands), and any plugins using the same mechanisms, such as Job DSL Plugin.</p>\n</div>\n</div>\n<div class=\"sect3\">\n<h4 id=\"_csrf_crumb_no_longer_required_when_authenticating_using_api_token\">CSRF crumb no longer required when authenticating using API token</h4>\n<div class=\"paragraph\">\n<p><a href=\"https://issues.jenkins.io/browse/JENKINS-22474\">JENKINS-22474</a></p>\n</div>\n<div class=\"paragraph\">\n<p>It is no longer necessary to provide a CSRF crumb when sending an HTTP request with <code>Basic</code> authentication that provides the authenticating user&#8217;s API token in place of a password.</p>\n</div>\n</div>\n<div class=\"sect3\">\n<h4 id=\"_known_issues\">Known issues</h4>\n<div class=\"paragraph\">\n<p>This is a list of confirmed regressions introduced in this release.</p>\n</div>\n<div class=\"ulist\">\n<ul>\n<li>\n<p><a href=\"https://issues.jenkins.io/browse/JENKINS-49392\">JENKINS-49392</a>:\nSome job configuration forms may fail to load if plugin:violations[Violations Plugin] is installed.</p>\n</li>\n<li>\n<p><a href=\"https://issues.jenkins.io/browse/JENKINS-47736\">JENKINS-47736</a>:\nSome <a href=\"https://wiki.jenkins.io/display/JENKINS/Plugins+affected+by+fix+for+JEP-200\">Plugins affected by fix for JEP-200</a>\nmay be not fixed yet.</p>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>Check the linked page for the up-to-date state and workarounds.</p>\n</li>\n</ul>\n</div>\n</li>\n</ul>\n</div>\n</div>","document":{"title":"Whitelist for Remoting and XStream (JEP-200)"},"author":{"fullName":null},"pageAttributes":{"author_name":null,"author":null,"tags":null,"opengraph":null}}},"pageContext":{"node":{"id":"14223c0d-9194-5975-846b-102f20ed6922","html":"<div class=\"sect3\">\n<h4 id=\"_whitelist_for_remoting_and_xstream_jep_200\">Whitelist for Remoting and XStream (JEP-200)</h4>\n<div class=\"paragraph\">\n<p><a href=\"/blog/2018/03/15/jep-200-lts/\">Announcement from Mar 15</a>,\n<a href=\"https://issues.jenkins.io/browse/JENKINS-47736\">JENKINS-47736</a>,\n<a href=\"https://github.com/jenkinsci/jep/blob/master/jep/200/README.adoc\">JEP-200 proposal and design</a></p>\n</div>\n<div class=\"paragraph\">\n<p>To prevent further security issues related to unsafe deserialization of Java objects, we switched to a whitelist for Remoting (the communication library mostly used between agents and master) and XStream (the XML serialization library).\nThis change means that only classes considered to be safe to (de)serialize will now be (de)serialized.</p>\n</div>\n<div class=\"paragraph\">\n<p>See <a href=\"/blog/2018/03/15/jep-200-lts/#for-jenkins-administrators\">the announcement blog post</a> for update guidelines.\nMany plugins require updates to be compatible with this new restriction (<a href=\"https://wiki.jenkins.io/display/JENKINS/Plugins+affected+by+fix+for+JEP-200\">list</a>),\nplease read the guide carefully.</p>\n</div>\n</div>\n<div class=\"sect3\">\n<h4 id=\"_xml_files_are_now_stored_as_xml_1_1\">XML files are now stored as XML 1.1</h4>\n<div class=\"paragraph\">\n<p><a href=\"https://issues.jenkins.io/browse/JENKINS-48463\">JENKINS-48463</a>,\n<a href=\"https://issues.jenkins.io/browse/JENKINS-50126\">JENKINS-50126</a></p>\n</div>\n<div class=\"paragraph\">\n<p>Jenkins now creates XML 1.1 files to be more accepting of unusual contents.\nThe XML processing instruction in those XML files will now indicate the version 1.1 instead of 1.0 as before:</p>\n</div>\n<div class=\"literalblock\">\n<div class=\"content\">\n<pre>&lt;?xml version=\"1.1\" encoding=\"UTF-8\" ?&gt;</pre>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>This change may result in Jenkins refusing to load or parse malformed files differently from previous releases:\nFor example, we have received a report (JENKINS-50126) that it now refuses to load XML files from disk that do not start with an XML processing instruction, but instead with a line break (empty line).</p>\n</div>\n<div class=\"paragraph\">\n<p>Previous versions of Jenkins cannot read XML 1.1 files, so downgrading Jenkins to an earlier release will result in errors.\nIn many cases, it <em>should</em> be sufficient to just replace <code>1.1</code> with <code>1.0</code> to make them readable again, but note that downgrades of Jenkins are generally unsupported.</p>\n</div>\n</div>\n<div class=\"sect3\">\n<h4 id=\"_updating_jenkins_jobs_and_views_by_xml_now_resets_unspecified_fields\">Updating Jenkins jobs and views by XML now resets unspecified fields</h4>\n<div class=\"paragraph\">\n<p><a href=\"https://issues.jenkins.io/browse/JENKINS-21017\">JENKINS-21017</a></p>\n</div>\n<div class=\"paragraph\">\n<p>In previous releases, updating jobs and views by XML left fields at their old value if not defined in the new XML file that the job or view is being updated with.\nThis long-standing bug has now been fixed, and Jenkins will reset unspecified fields to their default value, instead of retaining the previously defined value.\nThis impacts the Remote API (<code>POST config.xml</code>), the CLI (<code>update-job</code> and similar commands), and any plugins using the same mechanisms, such as Job DSL Plugin.</p>\n</div>\n</div>\n<div class=\"sect3\">\n<h4 id=\"_csrf_crumb_no_longer_required_when_authenticating_using_api_token\">CSRF crumb no longer required when authenticating using API token</h4>\n<div class=\"paragraph\">\n<p><a href=\"https://issues.jenkins.io/browse/JENKINS-22474\">JENKINS-22474</a></p>\n</div>\n<div class=\"paragraph\">\n<p>It is no longer necessary to provide a CSRF crumb when sending an HTTP request with <code>Basic</code> authentication that provides the authenticating user&#8217;s API token in place of a password.</p>\n</div>\n</div>\n<div class=\"sect3\">\n<h4 id=\"_known_issues\">Known issues</h4>\n<div class=\"paragraph\">\n<p>This is a list of confirmed regressions introduced in this release.</p>\n</div>\n<div class=\"ulist\">\n<ul>\n<li>\n<p><a href=\"https://issues.jenkins.io/browse/JENKINS-49392\">JENKINS-49392</a>:\nSome job configuration forms may fail to load if plugin:violations[Violations Plugin] is installed.</p>\n</li>\n<li>\n<p><a href=\"https://issues.jenkins.io/browse/JENKINS-47736\">JENKINS-47736</a>:\nSome <a href=\"https://wiki.jenkins.io/display/JENKINS/Plugins+affected+by+fix+for+JEP-200\">Plugins affected by fix for JEP-200</a>\nmay be not fixed yet.</p>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>Check the linked page for the up-to-date state and workarounds.</p>\n</li>\n</ul>\n</div>\n</li>\n</ul>\n</div>\n</div>","document":{"title":"Whitelist for Remoting and XStream (JEP-200)"},"fields":{"slug":"/2-107-1/"},"pageAttributes":{"layout":"upgrades","author":null,"tags":null,"author_name":null,"blog":null,"description":null,"github":null,"irc":null,"linkedin":null,"medium":null,"opengraph":null,"twitter":null,"authoravatar":null}},"id":"14223c0d-9194-5975-846b-102f20ed6922"}},"staticQueryHashes":[],"slicesMap":{}}