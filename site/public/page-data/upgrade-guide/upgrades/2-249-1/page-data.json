{"componentChunkName":"component---src-templates-step-template-js","path":"/upgrade-guide/upgrades/2-249-1/","result":{"data":{"asciidoc":{"html":"<div class=\"sect3\">\n<h4 id=\"_microsoft_net_framework_2_0_support_removed\">Microsoft .NET Framework 2.0 support removed</h4>\n<div class=\"imageblock right\">\n<div class=\"content\">\n<img src=\"/images/images/post-images/2020/07-windows-support-updates/winsw-logo.png\" alt=\"winsw logo\" width=\"224px\">\n</div>\n<div class=\"title\">Figure 1. WinSW Logo</div>\n</div>\n<div class=\"paragraph\">\n<p>Starting from this release, we won&#8217;t support .NET Framework 2.0 for launching the Jenkins controller or agents as Windows services.\nMicrosoft.NET Framework 4.0 or above is now required for using the default service management features.</p>\n</div>\n<div class=\"paragraph\">\n<p>This release also upgrades <a href=\"https://github.com/winsw/winsw\">Windows Service Wrapper (WinSW)</a> from 2.3.0 to 2.9.0 and replaces the bundled binary from .NET Framework 2.0 to 4.0.\nThere are many improvements and fixes in these versions,\nbig thanks to <a href=\"https://github.com/NextTurn\">NextTurn</a> and all other contributors.\nYou can find the full WinSW changelog <a href=\"https://github.com/winsw/winsw/releases\">here</a>,\njust a few highlights important to Jenkins users:</p>\n</div>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>Prompt for permission elevation when administrative access is required.\nNow Jenkins users do not need to run the agent process as Administrator to install the agent as a service from GUI.</p>\n</li>\n<li>\n<p>Enable TLS 1.1/1.2 in .NET Framework 4.0 packages on Windows 7 and Windows Server 2008 R2.</p>\n</li>\n<li>\n<p>Enable strong cryptography when running .NET Framework 4.0 binaries on .NET 4.6.</p>\n</li>\n<li>\n<p>Support security descriptor string in the Windows service definition.</p>\n</li>\n<li>\n<p>Support 'If-Modified-Since' and proxy settings for automatic downloads.</p>\n</li>\n<li>\n<p>Fix Runaway Process Killer extension so that it does not kill wrong processes with the same PID on startup.</p>\n</li>\n<li>\n<p>Fix the default domain name in the <code>serviceaccount</code> parameter (jira:JENKINS-12660[])</p>\n</li>\n<li>\n<p>Fix archiving of old logs in the <code>roll-by-size-time</code> mode.</p>\n</li>\n</ul>\n</div>\n<div class=\"paragraph\">\n<p>As you may see, there are many improvements available with this version,\nand we hope that it will make Windows service installation even more reliable.\nSome of the changes in WinSW also replaced old workarounds in the Jenkins core,\nmaking the code more maintainable.</p>\n</div>\n<div class=\"sect4\">\n<h5 id=\"_use_cases_affected_by_net_framework_2_0_support_removal\">Use-cases affected by .NET Framework 2.0 support removal</h5>\n<div class=\"paragraph\">\n<p>If you use .NET Framework 2.0 to run the Jenkins Windows services,\nthe following use-cases are likely to be affected:</p>\n</div>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>Installing the Jenkins controller as a Windows service from Web UI.\nThe official MSI Installer supports .NET Framework 2.0 for the moment, but it will be changed in future versions.</p>\n</li>\n<li>\n<p>Installing agents as Windows services from GUI.\nThis feature is provided by in <a href=\"https://github.com/jenkinsci/windows-slave-installer-module\">Windows Agent Installer Module</a> from the Jenkins core.</p>\n</li>\n<li>\n<p>Installing agents over Windows Management Instrumentation (WMI) via the plugin:windows-slaves[WMI Windows Agents] plugin</p>\n</li>\n<li>\n<p>Auto-updating of Windows service wrappers on agents installed from GUI.</p>\n</li>\n</ul>\n</div>\n</div>\n<div class=\"sect4\">\n<h5 id=\"_upgrade_guidelines\">Upgrade guidelines</h5>\n<div class=\"paragraph\">\n<p>If all of your Jenkins controller and agent instances already use .NET Framework 4.0 or above,\nthere are no special upgrade steps required.\nPlease enjoy the new features!</p>\n</div>\n<div class=\"paragraph\">\n<p>If you run the Jenkins controller as a Windows Service with .NET Framework 2.0,\nthis instance will require an upgrade of .NET Framework to version 4.0 or above.\nWe recommend running with .NET Framework 4.6.1 or above,\nbecause this .NET version provides many platform features by default\n(e.g. TLS 1.2 encryption and strong cryptography),\nand Windows Service Wrapper does not have to apply custom workarounds.</p>\n</div>\n<div class=\"paragraph\">\n<p>If you want to continue running some of your agents with .NET Framework 2.0,\nthe following extra upgrade steps are required:</p>\n</div>\n<div class=\"olist arabic\">\n<ol class=\"arabic\">\n<li>\n<p>Disable auto-upgrade of Windows Service Wrapper on agents by setting the\n<code>-Dorg.jenkinsci.modules.windows_slave_installer.disableAutoUpdate=true</code> flag on the Jenkins controller side.</p>\n</li>\n<li>\n<p>Upgrade agents with .NET Framework 4.0+ by downloading the recent Windows Service Wrapper 2.x\nversion from <a href=\"https://github.com/winsw/winsw/releases\">WinSW GitHub Releases</a>\nand manually replacing the wrapper \".exe\" files in the agent workspaces.</p>\n</li>\n</ol>\n</div>\n</div>\n</div>\n<div class=\"sect3\">\n<h4 id=\"_wmi_windows_agents_plugin\">WMI Windows agents plugin</h4>\n<div class=\"paragraph\">\n<p>The plugin:windows-slaves[WMI Windows Agents] plugin version 1.7 has been released for Jenkins 2.249.1 and later.\nPrior versions of the plugin will report a null pointer exception and the agent will fail to connect to Jenkins 2.249.1.</p>\n</div>\n<div class=\"paragraph\">\n<p>Jenkins 2.249.1 users of the plugin:windows-slaves[WMI Windows Agents] plugin should upgrade to version 1.7.</p>\n</div>\n</div>\n<div class=\"sect3\">\n<h4 id=\"view-statusfilter-removed-from-configuration-as-code\">View job status filter</h4>\n<div class=\"paragraph\">\n<p>As part of a performance improvement for list views, the <code>statusFilter</code> key is now an optional, separate item in the Jenkins view configuration.</p>\n</div>\n<div class=\"paragraph\">\n<p>The job status filter has been moved to be a Job View Filter.\nThe order of this filter matters as its interaction with various other filters will affect what jobs are shown in the view.\nIf the status filter is the <strong>first</strong> filter (filtering only enabled jobs) and a later filter adds a disabled job. the disabled job will be visible.\nIf the status filter is <strong>last</strong> in the same scenario, the disabled job will <strong>not</strong> be visible.</p>\n</div>\n<div class=\"admonitionblock note\">\n<table>\n<tr>\n<td class=\"icon\">\n<div class=\"title\">Note</div>\n</td>\n<td class=\"content\">\nThe job status filter defined on views from previous Jenkins versions is <strong>not</strong> migrated in Jenkins 2.249.1\nRefer to <a href=\"https://issues.jenkins.io/browse/JENKINS-62661\">JENKINS-62661</a>.\n</td>\n</tr>\n</table>\n</div>\n<div class=\"sect4\">\n<h5 id=\"_configuration_as_code_statusfilter\">Configuration as code statusFilter</h5>\n<div class=\"paragraph\">\n<p>The <code>statusFilter</code> key in <a href=\"https://plugins.jenkins.io/configuration-as-code/\">configuration as code</a> view definitions must be removed or replaced with a new entry as part of the upgrade to Jenkins 2.249.1.</p>\n</div>\n<div class=\"dlist\">\n<dl>\n<dt class=\"hdlist1\">Previous configuration</dt>\n<dd>\n<p>The previous configuration looked like this:</p>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre>  views:\n  - list:\n      columns:\n      - \"status\"\n      - \"weather\"\n      - \"jobName\"\n      description: \"Jobs failing recently\"\n      jobFilters:\n      - jobStatusFilter:\n          aborted: true\n          failed: true\n          includeExcludeTypeString: \"includeMatched\"\n      name: \"Failed Jobs\"\n      statusFilter: true # This must be removed</pre>\n</div>\n</div>\n</dd>\n<dt class=\"hdlist1\">New configuration</dt>\n<dd>\n<p>The new configuration looks like this:</p>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre>  views:\n  - list:\n      columns:\n      - \"status\"\n      - \"weather\"\n      - \"jobName\"\n      description: \"Jobs failing recently\"\n      jobFilters:\n      - jobStatusFilter:\n          aborted: true\n          failed: true\n          includeExcludeTypeString: \"includeMatched\"\n      - statusFilter: # This is the replacement section\n          statusFilter: true\n      name: \"Failed Jobs\"</pre>\n</div>\n</div>\n</dd>\n</dl>\n</div>\n<div class=\"paragraph\">\n<p>If the  <code>statusFilter</code> key is not updated or removed from the YAML file, Jenkins halts during startup with a stack trace.\nThe initial section of the failure stack trace looks like this:</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"title\">Configuration as code stack trace</div>\n<div class=\"content\">\n<pre>SEVERE  jenkins.InitReactorRunner$1#onTaskFailed: Failed ConfigurationAsCode.init\nio.jenkins.plugins.casc.ConfiguratorException: 'statusFilter' is deprecated\n        at io.jenkins.plugins.casc.BaseConfigurator.configure(BaseConfigurator.java:321)\n        at io.jenkins.plugins.casc.BaseConfigurator.configure(BaseConfigurator.java:270)\n        ...</pre>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect3\">\n<h4 id=\"_alternate_url_removed_from_inbound_agent\">Alternate URL removed from inbound agent</h4>\n<div class=\"paragraph\">\n<p>Jenkins 2.249.1 no longer provides a fallback URL in the inbound agent launch file (the <code>slave-agent.jnlp</code> file).\nPrior releases included an alternate URL in the inbound agent launch file when the launch file was requested through a URL that is not the Jenkins root URL.\nIf the Jenkins root URL was unreachable by the agent, the alternate URL was used.</p>\n</div>\n<div class=\"paragraph\">\n<p>The alternate URL must be provided as an argument to the <code>agent.jar</code> command for Jenkins 2.249.1 and later.\nThe inbound agent can connect to the alternate URL using commands like this:</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">$ WORKDIR=&lt;work-dir-from-agent-definition-page&gt;\n$ ALTERNATE_URL=&lt;alternate-url-used-to-access-Jenkins&gt;\n$ SECRET_STRING=&lt;secret-from-agent-definition-page&gt;\n$ AGENT_NAME=&lt;agent-name-from-agent-definition-page&gt;\n$ java -cp agent.jar hudson.remoting.jnlp.Main \\\n  -headless \\\n  -workDir $WORKDIR \\\n  -url $ALTERNATE_URL \\\n  $SECRET_STRING \\\n  $AGENT_NAME</code></pre>\n</div>\n</div>\n</div>","document":{"title":"Microsoft .NET Framework 2.0 support removed"},"author":{"fullName":null},"pageAttributes":{"author_name":null,"author":null,"tags":null,"opengraph":null}}},"pageContext":{"node":{"id":"d680e12d-522c-5961-9afc-e987de99323b","html":"<div class=\"sect3\">\n<h4 id=\"_microsoft_net_framework_2_0_support_removed\">Microsoft .NET Framework 2.0 support removed</h4>\n<div class=\"imageblock right\">\n<div class=\"content\">\n<img src=\"/images/images/post-images/2020/07-windows-support-updates/winsw-logo.png\" alt=\"winsw logo\" width=\"224px\">\n</div>\n<div class=\"title\">Figure 1. WinSW Logo</div>\n</div>\n<div class=\"paragraph\">\n<p>Starting from this release, we won&#8217;t support .NET Framework 2.0 for launching the Jenkins controller or agents as Windows services.\nMicrosoft.NET Framework 4.0 or above is now required for using the default service management features.</p>\n</div>\n<div class=\"paragraph\">\n<p>This release also upgrades <a href=\"https://github.com/winsw/winsw\">Windows Service Wrapper (WinSW)</a> from 2.3.0 to 2.9.0 and replaces the bundled binary from .NET Framework 2.0 to 4.0.\nThere are many improvements and fixes in these versions,\nbig thanks to <a href=\"https://github.com/NextTurn\">NextTurn</a> and all other contributors.\nYou can find the full WinSW changelog <a href=\"https://github.com/winsw/winsw/releases\">here</a>,\njust a few highlights important to Jenkins users:</p>\n</div>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>Prompt for permission elevation when administrative access is required.\nNow Jenkins users do not need to run the agent process as Administrator to install the agent as a service from GUI.</p>\n</li>\n<li>\n<p>Enable TLS 1.1/1.2 in .NET Framework 4.0 packages on Windows 7 and Windows Server 2008 R2.</p>\n</li>\n<li>\n<p>Enable strong cryptography when running .NET Framework 4.0 binaries on .NET 4.6.</p>\n</li>\n<li>\n<p>Support security descriptor string in the Windows service definition.</p>\n</li>\n<li>\n<p>Support 'If-Modified-Since' and proxy settings for automatic downloads.</p>\n</li>\n<li>\n<p>Fix Runaway Process Killer extension so that it does not kill wrong processes with the same PID on startup.</p>\n</li>\n<li>\n<p>Fix the default domain name in the <code>serviceaccount</code> parameter (jira:JENKINS-12660[])</p>\n</li>\n<li>\n<p>Fix archiving of old logs in the <code>roll-by-size-time</code> mode.</p>\n</li>\n</ul>\n</div>\n<div class=\"paragraph\">\n<p>As you may see, there are many improvements available with this version,\nand we hope that it will make Windows service installation even more reliable.\nSome of the changes in WinSW also replaced old workarounds in the Jenkins core,\nmaking the code more maintainable.</p>\n</div>\n<div class=\"sect4\">\n<h5 id=\"_use_cases_affected_by_net_framework_2_0_support_removal\">Use-cases affected by .NET Framework 2.0 support removal</h5>\n<div class=\"paragraph\">\n<p>If you use .NET Framework 2.0 to run the Jenkins Windows services,\nthe following use-cases are likely to be affected:</p>\n</div>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>Installing the Jenkins controller as a Windows service from Web UI.\nThe official MSI Installer supports .NET Framework 2.0 for the moment, but it will be changed in future versions.</p>\n</li>\n<li>\n<p>Installing agents as Windows services from GUI.\nThis feature is provided by in <a href=\"https://github.com/jenkinsci/windows-slave-installer-module\">Windows Agent Installer Module</a> from the Jenkins core.</p>\n</li>\n<li>\n<p>Installing agents over Windows Management Instrumentation (WMI) via the plugin:windows-slaves[WMI Windows Agents] plugin</p>\n</li>\n<li>\n<p>Auto-updating of Windows service wrappers on agents installed from GUI.</p>\n</li>\n</ul>\n</div>\n</div>\n<div class=\"sect4\">\n<h5 id=\"_upgrade_guidelines\">Upgrade guidelines</h5>\n<div class=\"paragraph\">\n<p>If all of your Jenkins controller and agent instances already use .NET Framework 4.0 or above,\nthere are no special upgrade steps required.\nPlease enjoy the new features!</p>\n</div>\n<div class=\"paragraph\">\n<p>If you run the Jenkins controller as a Windows Service with .NET Framework 2.0,\nthis instance will require an upgrade of .NET Framework to version 4.0 or above.\nWe recommend running with .NET Framework 4.6.1 or above,\nbecause this .NET version provides many platform features by default\n(e.g. TLS 1.2 encryption and strong cryptography),\nand Windows Service Wrapper does not have to apply custom workarounds.</p>\n</div>\n<div class=\"paragraph\">\n<p>If you want to continue running some of your agents with .NET Framework 2.0,\nthe following extra upgrade steps are required:</p>\n</div>\n<div class=\"olist arabic\">\n<ol class=\"arabic\">\n<li>\n<p>Disable auto-upgrade of Windows Service Wrapper on agents by setting the\n<code>-Dorg.jenkinsci.modules.windows_slave_installer.disableAutoUpdate=true</code> flag on the Jenkins controller side.</p>\n</li>\n<li>\n<p>Upgrade agents with .NET Framework 4.0+ by downloading the recent Windows Service Wrapper 2.x\nversion from <a href=\"https://github.com/winsw/winsw/releases\">WinSW GitHub Releases</a>\nand manually replacing the wrapper \".exe\" files in the agent workspaces.</p>\n</li>\n</ol>\n</div>\n</div>\n</div>\n<div class=\"sect3\">\n<h4 id=\"_wmi_windows_agents_plugin\">WMI Windows agents plugin</h4>\n<div class=\"paragraph\">\n<p>The plugin:windows-slaves[WMI Windows Agents] plugin version 1.7 has been released for Jenkins 2.249.1 and later.\nPrior versions of the plugin will report a null pointer exception and the agent will fail to connect to Jenkins 2.249.1.</p>\n</div>\n<div class=\"paragraph\">\n<p>Jenkins 2.249.1 users of the plugin:windows-slaves[WMI Windows Agents] plugin should upgrade to version 1.7.</p>\n</div>\n</div>\n<div class=\"sect3\">\n<h4 id=\"view-statusfilter-removed-from-configuration-as-code\">View job status filter</h4>\n<div class=\"paragraph\">\n<p>As part of a performance improvement for list views, the <code>statusFilter</code> key is now an optional, separate item in the Jenkins view configuration.</p>\n</div>\n<div class=\"paragraph\">\n<p>The job status filter has been moved to be a Job View Filter.\nThe order of this filter matters as its interaction with various other filters will affect what jobs are shown in the view.\nIf the status filter is the <strong>first</strong> filter (filtering only enabled jobs) and a later filter adds a disabled job. the disabled job will be visible.\nIf the status filter is <strong>last</strong> in the same scenario, the disabled job will <strong>not</strong> be visible.</p>\n</div>\n<div class=\"admonitionblock note\">\n<table>\n<tr>\n<td class=\"icon\">\n<div class=\"title\">Note</div>\n</td>\n<td class=\"content\">\nThe job status filter defined on views from previous Jenkins versions is <strong>not</strong> migrated in Jenkins 2.249.1\nRefer to <a href=\"https://issues.jenkins.io/browse/JENKINS-62661\">JENKINS-62661</a>.\n</td>\n</tr>\n</table>\n</div>\n<div class=\"sect4\">\n<h5 id=\"_configuration_as_code_statusfilter\">Configuration as code statusFilter</h5>\n<div class=\"paragraph\">\n<p>The <code>statusFilter</code> key in <a href=\"https://plugins.jenkins.io/configuration-as-code/\">configuration as code</a> view definitions must be removed or replaced with a new entry as part of the upgrade to Jenkins 2.249.1.</p>\n</div>\n<div class=\"dlist\">\n<dl>\n<dt class=\"hdlist1\">Previous configuration</dt>\n<dd>\n<p>The previous configuration looked like this:</p>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre>  views:\n  - list:\n      columns:\n      - \"status\"\n      - \"weather\"\n      - \"jobName\"\n      description: \"Jobs failing recently\"\n      jobFilters:\n      - jobStatusFilter:\n          aborted: true\n          failed: true\n          includeExcludeTypeString: \"includeMatched\"\n      name: \"Failed Jobs\"\n      statusFilter: true # This must be removed</pre>\n</div>\n</div>\n</dd>\n<dt class=\"hdlist1\">New configuration</dt>\n<dd>\n<p>The new configuration looks like this:</p>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre>  views:\n  - list:\n      columns:\n      - \"status\"\n      - \"weather\"\n      - \"jobName\"\n      description: \"Jobs failing recently\"\n      jobFilters:\n      - jobStatusFilter:\n          aborted: true\n          failed: true\n          includeExcludeTypeString: \"includeMatched\"\n      - statusFilter: # This is the replacement section\n          statusFilter: true\n      name: \"Failed Jobs\"</pre>\n</div>\n</div>\n</dd>\n</dl>\n</div>\n<div class=\"paragraph\">\n<p>If the  <code>statusFilter</code> key is not updated or removed from the YAML file, Jenkins halts during startup with a stack trace.\nThe initial section of the failure stack trace looks like this:</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"title\">Configuration as code stack trace</div>\n<div class=\"content\">\n<pre>SEVERE  jenkins.InitReactorRunner$1#onTaskFailed: Failed ConfigurationAsCode.init\nio.jenkins.plugins.casc.ConfiguratorException: 'statusFilter' is deprecated\n        at io.jenkins.plugins.casc.BaseConfigurator.configure(BaseConfigurator.java:321)\n        at io.jenkins.plugins.casc.BaseConfigurator.configure(BaseConfigurator.java:270)\n        ...</pre>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect3\">\n<h4 id=\"_alternate_url_removed_from_inbound_agent\">Alternate URL removed from inbound agent</h4>\n<div class=\"paragraph\">\n<p>Jenkins 2.249.1 no longer provides a fallback URL in the inbound agent launch file (the <code>slave-agent.jnlp</code> file).\nPrior releases included an alternate URL in the inbound agent launch file when the launch file was requested through a URL that is not the Jenkins root URL.\nIf the Jenkins root URL was unreachable by the agent, the alternate URL was used.</p>\n</div>\n<div class=\"paragraph\">\n<p>The alternate URL must be provided as an argument to the <code>agent.jar</code> command for Jenkins 2.249.1 and later.\nThe inbound agent can connect to the alternate URL using commands like this:</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">$ WORKDIR=&lt;work-dir-from-agent-definition-page&gt;\n$ ALTERNATE_URL=&lt;alternate-url-used-to-access-Jenkins&gt;\n$ SECRET_STRING=&lt;secret-from-agent-definition-page&gt;\n$ AGENT_NAME=&lt;agent-name-from-agent-definition-page&gt;\n$ java -cp agent.jar hudson.remoting.jnlp.Main \\\n  -headless \\\n  -workDir $WORKDIR \\\n  -url $ALTERNATE_URL \\\n  $SECRET_STRING \\\n  $AGENT_NAME</code></pre>\n</div>\n</div>\n</div>","document":{"title":"Microsoft .NET Framework 2.0 support removed"},"fields":{"slug":"/2-249-1/"},"pageAttributes":{"layout":"upgrades","author":null,"tags":null,"author_name":null,"blog":null,"description":null,"github":null,"irc":null,"linkedin":null,"medium":null,"opengraph":null,"twitter":null,"authoravatar":null}},"id":"d680e12d-522c-5961-9afc-e987de99323b"}},"staticQueryHashes":[],"slicesMap":{}}